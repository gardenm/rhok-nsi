!!!
%html
  %head
    %script{src: "https://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js", type: "text/javascript"}
    %script{src: "https://www.google.com/jsapi", type: "text/javascript"}
    :javascript
      google.load('visualization', '1', {'packages': ['geochart']});
           google.setOnLoadCallback(drawMarkersMap);
      
            function drawMarkersMap() {
            var jsonData = $.ajax({
                  url: "/makeData",
                  dataType:"json",
                  async: false
                  }).responseText;
      
              // Create our data table out of JSON data loaded from server.
          var data = new google.visualization.DataTable(jsonData);
           
            var options = {
              region: 'world',
              
              colorAxis: {colors: ['yellow','red','green']}
            };
      
            var chart = new google.visualization.GeoChart(document.getElementById('chart_div'));
            chart.draw(data, options);
          };
  %body
    #chart_div{style: "width: 1300px; height: 700px;"}